<script type="text/javascript">
    function setup_pump(name){
        on = $(`#pump_${name}_on`);
	    off = $(`#pump_${name}_off`);

	    on.click(function(){
	        $.ajax({
                type: "GET",
                dataType: "json",
                url: `/api/pump/${name}?state=on`,
                success: function(){
                    on = $(`#pump_${name}_on`);
                    off = $(`#pump_${name}_off`);
                    on.removeClass("btn-secondary");
                    on.addClass("btn-primary");
                    off.addClass("btn-secondary");
                    off.removeClass("btn-primary");
                }
            })
        });
	    off.click(function(){
	        $.ajax({
                type: "GET",
                dataType: "json",
                url: `/api/pump/${name}?state=off`,
                success: function(){
                    on = $(`#pump_${name}_on`);
                    off = $(`#pump_${name}_off`);
                    off.removeClass("btn-secondary");
                    off.addClass("btn-primary");
                    on.addClass("btn-secondary");
                    on.removeClass("btn-primary");
                }
            })
        })
    }

	$(document).ready(function(){
	    setup_pump("{{ name }}");
	});
</script>

<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
    <span class="pt-3 pl-2" for="id_{{ name }}">{{ name }}</span>
    <div id="id_{{ name }}" class="btn-group m-2" role="group">
          <button id="pump_{{ name }}_on" type="button" class="btn btn-secondary">On</button>
          <button id="pump_{{ name }}_off" type="button" class="btn btn-primary">Off</button>
    </div>
</div>


